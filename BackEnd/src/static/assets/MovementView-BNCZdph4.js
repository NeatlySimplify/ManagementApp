import{I as j,u as V,K as G,b as f,e as c,l,F as q,C as H,p as M,j as F,k as K,g as e,E as L,z as h,f as d,G as I,_ as C,r as y,o as J,c as B,w as Q,m as W,A as T,M as E,H as X,q as Y}from"./index-BLc5R7KL.js";import{_ as Z}from"./NotesComponent-DYWILip1.js";import{_ as x,a as N,b as ee,c as te}from"./DataTableComponent-B_VWHDhR.js";import{_ as P}from"./FormNumberComponent-CZdznfC-.js";import{_ as le}from"./FormSelectObjectComponent-cI0HTVRD.js";import{_ as oe}from"./DatePickerComponent-BdC697Mz.js";const ne={class:"table table-hover"},ae={class:"table-group-divider"},se={class:"dropdown"},re={class:"dropdown-menu"},ie=["onClick"],de=["onClick"],ue={__name:"PaymentTableComponent",props:{payments:{type:Array},paymentsModifiers:{}},emits:["update:payments"],setup(w){const R=j(),g=V();function $(u){R.push({name:"payment",params:{id:u.id,back:!0}})}function v(u,r){g.deletePayment(u.id),b.value.splice(r,1)}const b=G(w,"payments");return(u,r)=>(c(),f("table",ne,[r[1]||(r[1]=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"Valor"),l("th",{scope:"col"},"Data de Pagamento"),l("th",{scope:"col"},"Status"),l("th",{scope:"col"},"#")])],-1)),l("tbody",ae,[(c(!0),f(q,null,H(b.value,(i,t)=>(c(),f("tr",{key:t},[l("td",null,"R$ "+M(i.value),1),l("td",null,M(i.status?i.payment_date:i.is_due),1),l("td",null,M(i.status),1),l("td",null,[l("div",se,[r[0]||(r[0]=l("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),l("ul",re,[l("li",null,[l("a",{class:"dropdown-item",onClick:s=>$(i),href:"#"},"Ver Mais!",8,ie)]),l("li",null,[l("a",{class:"dropdown-item",href:"#",onClick:s=>v(i,t)},"Excluir!",8,de)])])])])]))),128))])]))}},pe={class:"modal-header"},me={class:"modal-title"},ce={class:"modal-body"},ve={key:0},ye={key:1},fe={__name:"MovementFormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},emits:["close"],setup(w,{emit:R}){BeforeMounted(async()=>{v.mode==="show"&&v.id!==null&&(t.value={...u.fetchMovement(v.id)},_())});const g=R;function $(){g("close")}const v=w,b=F(),u=V(),r=K(),i=b.getSettings,t=ref({}),s=ref(!0),m={title:i.movement_title,expense:i.movement_expense_types.sort(),types:i.movement_types.sort(),income:i.movement_income_types.sort(),cycles:i.movement_cycle_types.sort()};function _(){s.value=!s.value}function O(){S(),_()}function U(){u.removeMovement(t.value.id),$()}function S(){v.mode==="create"?(r.placeholder!==""&&(t.value.record=r.placeholder,r.placeholder="",u.createMovement(t.value)),t.value.bank_account||(t.value.bank_account=m.default_bank_account),u.createMovement(t.value)):u.updateMovement(t.value)}return(D,o)=>(c(),f(q,null,[l("div",pe,[l("h5",me,M(e(t).name),1),l("button",{type:"button",class:"btn-close",onClick:$},"Sair")]),l("div",ce,[l("div",null,[l("form",{onSubmit:o[16]||(o[16]=L(()=>{},["prevent"]))},[v.mode!=="show"?(c(),f("div",ve,[d(C,{title:"Nome",placeholder:e(t).name,"onUpdate:placeholder":o[0]||(o[0]=n=>e(t).name=n),required:!0,isReadOnly:e(s)},null,8,["placeholder","isReadOnly"]),d(x,{title:"Tipos de "+m.title,placeholder:e(t).type_tag,"onUpdate:placeholder":o[1]||(o[1]=n=>e(t).type_tag=n),required:!0,types:m.types},null,8,["title","placeholder","types"]),d(x,{title:"Intervalo de Parcelas de "+m.title,placeholder:e(t).cycle,"onUpdate:placeholder":o[2]||(o[2]=n=>e(t).cycle=n),required:!0,types:m.cycles},null,8,["title","placeholder","types"]),e(t).cycle==="Personalizado"?(c(),I(P,{key:0,title:"Intervalo de Tempo Personalizado",min:"2",max:"360",step:"1",placeholder:e(t).unique,"onUpdate:placeholder":o[3]||(o[3]=n=>e(t).unique=n),isReadOnly:e(s)},null,8,["placeholder","isReadOnly"])):h("",!0),d(P,{title:"Numero de Parcelas",min:"1",max:"120",step:"1",placeholder:e(t).parts,"onUpdate:placeholder":o[4]||(o[4]=n=>e(t).parts=n),required:!0,isReadOnly:e(s)},null,8,["placeholder","isReadOnly"]),d(N,{title:"Ignore no balanço da conta",placeholder:e(t).ignore_in_totals,"onUpdate:placeholder":o[5]||(o[5]=n=>e(t).ignore_in_totals=n),isReadOnly:e(s)},null,8,["placeholder","isReadOnly"]),d(P,{title:"Todal de "+m.title,placeholder:e(t).total,"onUpdate:placeholder":o[6]||(o[6]=n=>e(t).total=n),min:"0",step:"0.01",isReadOnly:e(s)},null,8,["title","placeholder","isReadOnly"]),d(C,{title:"Primeira data de Pagamento",placeholder:e(t).payment_date,"onUpdate:placeholder":o[7]||(o[7]=n=>e(t).payment_date=n),isReadOnly:e(s),type:"date"},null,8,["placeholder","isReadOnly"]),d(C,{title:"Primeira data de Vencimento",placeholder:e(t).is_due,"onUpdate:placeholder":o[8]||(o[8]=n=>e(t).is_due=n),isReadOnly:e(s),required:!0,type:"date"},null,8,["placeholder","isReadOnly"]),d(x,{title:"Categoria",isReadOnly:e(s),placeholder:e(t).category,"onUpdate:placeholder":o[9]||(o[9]=n=>e(t).category=n),types:e(t).type_tag==="Entrada"||e(t).type_tag==="income"?m.income:m.expense},null,8,["isReadOnly","placeholder","types"]),d(N,{title:"Status",isReadOnly:e(s),placeholder:e(t).status,"onUpdate:placeholder":o[10]||(o[10]=n=>e(t).status=n)},null,8,["isReadOnly","placeholder"]),d(le,{title:"Conta Bancária Default",object:e(b).getAllAccounts,placeholder:e(t).bank_account,"onUpdate:placeholder":o[11]||(o[11]=n=>e(t).bank_account=n)},null,8,["object","placeholder"])])):h("",!0),d(Z,{notes:e(t).notes,isReadOnly:e(s)},null,8,["notes","isReadOnly"]),e(s)?(c(),f("div",ye,[o[17]||(o[17]=l("br",null,null,-1)),d(ue,{payments:e(t).payment,"onUpdate:payments":o[12]||(o[12]=n=>e(t).payment=n)},null,8,["payments"])])):h("",!0),e(s)?(c(),f("button",{key:2,type:"button",onClick:o[13]||(o[13]=n=>_()),class:"btn btn-secondary"}," Editar ")):(c(),f("button",{key:3,type:"submit",onClick:o[14]||(o[14]=n=>O()),class:"btn btn-secondary"}," Salvar ")),l("button",{type:"button",onClick:o[15]||(o[15]=n=>U()),class:"btn btn-danger"},"Excluir")],32)])]),l("div",{class:"modal-footer"},[l("button",{type:"button",class:"btn btn-primary",onClick:$},"Sair")])],64))}},be={class:"row"},ge={class:"flex items-center justify-between mb-5"},_e={class:"text-3xl"},ke={class:"row"},$e={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},Me={key:0,class:"row"},Ce={__name:"MovementView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},term:{type:[String],required:!1,default:"all"}},setup(w){const R=j(),g=V(),v=F().getSettings,b=y({});J(()=>{n(),u.id!==null&&D(u.id)});const u=w,r=y(""),i=y(new Date);r.value=u.term;const t=y(null),s=y(!1),m=y(!0),_=y(""),O=y(""),U=y(""),S=y([{field:"type_tag",title:"Tipo"},{field:"value",title:"Valor"},{field:"installment",title:"Parcelas"},{field:"actions",title:"Actions"}])||[];function D(k){U.value=k,O.value=g.getMovement(k).name,s.value=!0,_.value="show"}function o(){s.value=!0,_.value="create"}function n(){m.value=!0,r.value==="all"||r.value===null?b.value=B(()=>g.getAllMovement):b.value=B(()=>g.getActiveMovement(i)),t.value=b.value,m.value=!1}function A(){s.value=!1,u.back&&R.back()}function z(k){g.removeMovement(k)}return Q(r,n,{immediate:!0}),(k,a)=>(c(),f(q,null,[l("div",be,[l("div",ge,[l("h2",_e,M(e(v).movement_title),1),l("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:a[0]||(a[0]=p=>o())},[a[8]||(a[8]=l("span",null,"➕",-1)),W(" Adicionar novo(a) "+M(e(v).movement_title),1)])]),l("div",ke,[l("div",$e,[T(l("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio1",value:"all","onUpdate:modelValue":a[1]||(a[1]=p=>r.value=p),autocomplete:"off"},null,512),[[E,r.value]]),a[9]||(a[9]=l("label",{class:"btn btn-outline-primary",for:"btnradio1"},"Ver Todos",-1)),T(l("input",{type:"radio",class:"btn-check",name:"btnradio",id:"btnradio2",value:"filter","onUpdate:modelValue":a[2]||(a[2]=p=>r.value=p),autocomplete:"off"},null,512),[[E,r.value]]),a[10]||(a[10]=l("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Ver Ativos na data de referencia",-1))])]),r.value==="filter"?(c(),f("div",Me,[d(oe,{currentDate:i.value,"onUpdate:currentDate":a[3]||(a[3]=p=>i.value=p)},null,8,["currentDate"])])):h("",!0),d(ee,{rows:t.value,"onUpdate:rows":a[4]||(a[4]=p=>t.value=p),cols:e(S),"onUpdate:cols":a[5]||(a[5]=p=>X(S)?S.value=p:null),loading:m.value,"onUpdate:loading":a[6]||(a[6]=p=>m.value=p),route:k.route,"onUpdate:route":a[7]||(a[7]=p=>k.route=p),onDelete_:z},null,8,["rows","cols","loading","route"])]),s.value?(c(),I(te,{key:0,title:O.value,onClose:A},{default:Y(()=>[d(fe,{id:U.value,mode:_.value,onClose:A},null,8,["id","mode"])]),_:1},8,["title"])):h("",!0)],64))}};export{Ce as default};
