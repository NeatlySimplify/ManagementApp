import{y as M,r as _,o as P,b as y,e as p,z as V,l as t,A as U,B as A,F as B,C as D,j as F,D as I,g as l,p as T,k as h,E as j,f as $,_ as N,c as L,G as z,m as G,H,q as J,I as K}from"./index-DpmoGnXt.js";import{_ as Q}from"./NotesComponent-Bc3eCxgn.js";import{_ as q,a as W,b as X,c as Y}from"./DataTableComponent-B9Nt-FVu.js";const Z={class:"border rounded"},tt={key:0},et={class:"col-sm-10 input-group"},lt={class:"col-sm-10 input-group"},nt={class:"col-sm-10 input-group"},ot={class:"col-sm-10 input-group"},st={class:"col-sm-10 input-group"},at={class:"col-sm-10 input-group"},it={key:0},ut=["onClick"],rt=["onClick"],dt={class:"col-sm-10 input-group"},pt=["value"],ct={class:"col-sm-10 input-group"},vt=["value"],yt={class:"col-sm-10 input-group"},mt=["value"],ft={class:"col-sm-10 input-group"},gt=["value"],bt={class:"col-sm-10 input-group"},xt=["value"],$t={class:"col-sm-10 input-group"},Ct=["value"],kt={__name:"AddressComponent",props:{entity:Object,isReadOnly:Boolean},setup(O){const E=M(),f=O,r=_({}),S=_(!1),C=_(null),a=_([]);function b(){r.value={},C.value=null,S.value=!1}function x(v){C.value=v,r.value={...a[v]},S.value=!0}function c(){E.updateAddress(r.value),a[C.value]={...r.value},b()}function n(v){E.deleteAddress(f.entity.value.id,v),a.value=a.value.filter(e=>e.id!==v)}function d(){r.value.id=E(r.value),a.value.push({...r.value})}return P(()=>{f.entity?.value?.address&&(a.value=f.entity.value.address.map(v=>({...v})))}),(v,e)=>(p(),y("div",Z,[O.isReadOnly?V("",!0):(p(),y("div",tt,[t("div",et,[e[9]||(e[9]=t("span",{class:"input-group-text"},"Estado",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>r.value.state=i),class:"form-control-plaintext"},null,512),[[A,r.value.state]])]),t("div",lt,[e[10]||(e[10]=t("span",{class:"input-group-text"},"Cidade",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=i=>r.value.city=i),class:"form-control-plaintext"},null,512),[[A,r.value.city]])]),t("div",nt,[e[11]||(e[11]=t("span",{class:"input-group-text"},"Bairro",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=i=>r.value.district=i),class:"form-control-plaintext"},null,512),[[A,r.value.district]])]),t("div",ot,[e[12]||(e[12]=t("span",{class:"input-group-text"},"Rua",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=i=>r.value.street=i),class:"form-control-plaintext"},null,512),[[A,r.value.street]])]),t("div",st,[e[13]||(e[13]=t("span",{class:"input-group-text"},"Número",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=i=>r.value.number=i),class:"form-control-plaintext"},null,512),[[A,r.value.number]])]),t("div",at,[e[14]||(e[14]=t("span",{class:"input-group-text"},"Complemento",-1)),U(t("textarea",{rows:"2","onUpdate:modelValue":e[5]||(e[5]=i=>r.value.complement=i)},null,512),[[A,r.value.complement]])]),S.value?(p(),y("button",{key:1,class:"btn btn-outline-primary",onClick:e[7]||(e[7]=i=>c())},"Salvar")):(p(),y("button",{key:0,class:"btn btn-outline-primary",onClick:e[6]||(e[6]=i=>d())}," Salvar ")),t("button",{class:"btn btn-outline-warning",onClick:e[8]||(e[8]=i=>b())},"Limpar")])),(p(!0),y(B,null,D(a.value,(i,g)=>(p(),y("div",{key:g,class:"mb-3 row"},[O.isReadOnly?V("",!0):(p(),y("div",it,[t("button",{class:"btn btn-outline-secondary",onClick:s=>x(g)},"Editar",8,ut),t("button",{class:"btn btn-outline-danger",onClick:s=>n(i.id)},"Excluir",8,rt)])),t("div",null,[t("div",dt,[e[15]||(e[15]=t("span",{class:"input-group-text"},"Estado",-1)),t("input",{type:"text",readonly:"",value:i.state,class:"form-control-plaintext"},null,8,pt)]),t("div",ct,[e[16]||(e[16]=t("span",{class:"input-group-text"},"Cidade",-1)),t("input",{type:"text",readonly:"",value:i.city,class:"form-control-plaintext"},null,8,vt)]),t("div",yt,[e[17]||(e[17]=t("span",{class:"input-group-text"},"Bairro",-1)),t("input",{type:"text",readonly:"",value:i.district,class:"form-control-plaintext"},null,8,mt)]),t("div",ft,[e[18]||(e[18]=t("span",{class:"input-group-text"},"Rua",-1)),t("input",{type:"text",readonly:"",value:i.street,class:"form-control-plaintext"},null,8,gt)]),t("div",bt,[e[19]||(e[19]=t("span",{class:"input-group-text"},"Número",-1)),t("input",{type:"text",readonly:"",value:i.number,class:"form-control-plaintext"},null,8,xt)]),t("div",$t,[e[20]||(e[20]=t("span",{class:"input-group-text"},"Complemento",-1)),t("textarea",{rows:"2",readonly:"",value:i.complement},null,8,Ct)])])]))),128))]))}},_t={class:"border rounded"},Rt={key:0},St={class:"col-sm-10 input-group"},Ot=["value"],Et={class:"col-sm-10 input-group"},Ut={class:"col-sm-10 input-group"},wt={key:0},At=["onClick"],Vt=["onClick"],Bt={class:"col-sm-10"},Nt={class:"input-group"},qt=["value"],Tt={class:"col-sm-10"},Mt={class:"input-group"},Dt=["value"],Ft={class:"col-sm-10"},Pt={class:"input-group"},It=["value"],ht={__name:"ContactComponent",props:{entity,isReadonly},setup(O){const E=F(),f=M(),S=E.getSettings.contact_number_types.sort(),C=O,a=ref({}),b=ref(!1),x=ref(null),c=ref([]);function n(){a.value={},b.value=!1,x.value=null}function d(g){x.value=g,a.value={...c[g]},b.value=!0}function v(){f.updateContact(a.value),c[x.value]={...a.value},cleanAddressPlaceholder()}function e(g){f.deleteContact(C.entity.value.id,g),c.value=c.value.filter(s=>s.id!==g)}function i(){a.value.id=f.createContact(a.value),c.value.push({...a.value})}return onMounted(()=>{C.entity?.value?.phone&&(c.value=C.entity.value.phone.map(g=>({...g})))}),(g,s)=>(p(),y("div",_t,[g.isReadOnly?V("",!0):(p(),y("div",Rt,[t("div",St,[s[7]||(s[7]=t("span",{class:"input-group-text"},"Tipo de Número",-1)),U(t("select",{"onUpdate:modelValue":s[0]||(s[0]=m=>l(a).type_tag=m)},[s[6]||(s[6]=t("option",{selected:""},null,-1)),(p(!0),y(B,null,D(l(S),(m,o)=>(p(),y("option",{key:o,value:m},T(m),9,Ot))),128))],512),[[I,l(a).type_tag]])]),t("div",Et,[s[8]||(s[8]=t("span",{class:"input-group-text"},"Número de Telefone",-1)),U(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=m=>l(a).number=m),class:"form-control-plaintext"},null,512),[[A,l(a).number]])]),t("div",Ut,[s[9]||(s[9]=t("span",{class:"input-group-text"},"Complemento",-1)),U(t("textarea",{rows:"2","onUpdate:modelValue":s[2]||(s[2]=m=>l(a).complement=m)},null,512),[[A,l(a).complement]])]),l(b)?(p(),y("button",{key:1,class:"btn btn-outline-primary",onClick:s[4]||(s[4]=m=>v())},"Salvar")):(p(),y("button",{key:0,class:"btn btn-outline-primary",onClick:s[3]||(s[3]=m=>i())}," Salvar ")),t("button",{class:"btn btn-outline-warning",onClick:s[5]||(s[5]=m=>n())},"Limpar")])),(p(!0),y(B,null,D(l(c),(m,o)=>(p(),y("div",{key:o,class:"mb-3 row"},[g.isReadOnly?V("",!0):(p(),y("div",wt,[t("button",{class:"btn btn-outline-secondary",onClick:u=>d(o)},"Editar",8,At),t("button",{class:"btn btn-outline-danger",onClick:u=>e(m.id)},"Excluir",8,Vt)])),t("div",Bt,[s[10]||(s[10]=t("p",null,"Tipo de Número",-1)),t("div",Nt,[t("input",{type:"text",readonly:"",value:m.type_tag,class:"form-control-plaintext"},null,8,qt)])]),t("div",Tt,[s[11]||(s[11]=t("p",null,"Número de Telefone",-1)),t("div",Mt,[t("input",{type:"text",readonly:"",value:m.number,class:"form-control-plaintext"},null,8,Dt)])]),t("div",Ft,[s[12]||(s[12]=t("p",null,"Informações Complementares",-1)),t("div",Pt,[t("textarea",{readonly:"",rows:"2",value:m.complement,class:"form-control-plaintext"},null,8,It)])])]))),128))]))}},jt={class:"modal-header"},Lt={class:"modal-title"},zt={class:"modal-body"},Gt={__name:"FormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},emits:["close"],setup(O,{emit:E}){BeforeMounted(async()=>{a.mode==="show"&&a.id!==null&&(n.value={...x.fetchEntity(a.id)},e())});const f=h(),r=ref(""),S=E;function C(){S("close")}const a=O,b=F(),x=M(),c=b.getSettings,n=ref({}),d=ref(!0),v={title:c.entity_title,types:c.entity_types.sort(),documents:c.entity_document_types.sort(),relationship:c.relationship_status.sort(),sex:c.sex.sort()};function e(){d.value=!d.value}function i(){s(),e()}function g(){x.removeEntity(n.value.id),C()}function s(){a.mode==="create"?(f.placeholder!==""&&(r.value=f.placeholder,f.placeholder=""),x.createEntity(n.value)):x.updateEntity(n.value)}return(m,o)=>(p(),y(B,null,[t("div",jt,[t("h5",Lt,T(l(n).name),1),t("button",{type:"button",class:"btn-close",onClick:C},"Sair")]),t("div",zt,[t("div",null,[t("form",{onSubmit:o[13]||(o[13]=j(()=>{},["prevent"]))},[$(N,{title:"Email",isReadOnly:l(d),required:!0,placeholder:l(n).email,"onUpdate:placeholder":o[0]||(o[0]=u=>l(n).email=u)},null,8,["isReadOnly","placeholder"]),$(q,{title:"Tipos de "+v.title,isReadOnly:l(d),required:!0,placeholder:l(n).type_tag,"onUpdate:placeholder":o[1]||(o[1]=u=>l(n).type_tag=u),types:v.types},null,8,["title","isReadOnly","placeholder","types"]),$(q,{title:"Tipos de "+v.title,isReadOnly:l(d),required:!0,placeholder:l(n).document_type,"onUpdate:placeholder":o[2]||(o[2]=u=>l(n).document_type=u),types:v.documents},null,8,["title","isReadOnly","placeholder","types"]),$(N,{title:"Documento",isReadOnly:l(d),required:!0,placeholder:l(n).document,"onUpdate:placeholder":o[3]||(o[3]=u=>l(n).document=u)},null,8,["isReadOnly","placeholder"]),$(W,{title:"Status",isReadOnly:l(d),placeholder:l(n).status,"onUpdate:placeholder":o[4]||(o[4]=u=>l(n).status=u)},null,8,["isReadOnly","placeholder"]),$(N,{title:"Nome",isReadOnly:l(d),required:!0,placeholder:l(n).name,"onUpdate:placeholder":o[5]||(o[5]=u=>l(n).name=u)},null,8,["isReadOnly","placeholder"]),$(q,{title:"Sexo",isReadOnly:l(d),placeholder:l(n).sex,"onUpdate:placeholder":o[6]||(o[6]=u=>l(n).sex=u),types:v.sex},null,8,["isReadOnly","placeholder","types"]),$(q,{title:"Estado Cívil",isReadOnly:l(d),placeholder:l(n).relationship_status,"onUpdate:placeholder":o[7]||(o[7]=u=>l(n).relationship_status=u),types:v.relationship},null,8,["isReadOnly","placeholder","types"]),$(N,{title:"Data de Nascimento",isReadOnly:l(d),placeholder:l(n).birth,"onUpdate:placeholder":o[8]||(o[8]=u=>l(n).birth=u),type:"date"},null,8,["isReadOnly","placeholder"]),$(kt,{entity:l(n),isReadOnly:l(d)},null,8,["entity","isReadOnly"]),$(ht,{entity:l(n),isReadOnly:l(d)},null,8,["entity","isReadOnly"]),$(Q,{notes:l(n).notes,"onUpdate:notes":o[9]||(o[9]=u=>l(n).notes=u),isReadOnly:l(d)},null,8,["notes","isReadOnly"]),l(d)?(p(),y("button",{key:0,type:"button",onClick:o[10]||(o[10]=u=>e()),class:"btn btn-secondary"}," Editar ")):(p(),y("button",{key:1,type:"submit",onClick:o[11]||(o[11]=u=>i()),class:"btn btn-secondary"}," Salvar ")),t("button",{type:"button",onClick:o[12]||(o[12]=u=>g()),class:"btn btn-danger"},"Excluir")],32)])]),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-primary",onClick:C},"Sair")])],64))}},Ht={class:"flex items-center justify-between mb-5"},Jt={class:"text-3xl"},Xt={__name:"EntityView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},filter:{type:[String,null],required:!1,default:null},term:{type:[Boolean,String,null],required:!1,default:null}},setup(O){const E=K(),f=M(),S=F().getSettings,C=L(()=>f.getAllEntities),a=_("/entity");P(()=>{m(),b.id!==null&&g(b.id)});const b=O,x=_(null),c=_(!1),n=_(!0),d=_(""),v=_(""),e=_(""),i=_([{field:"name",title:"Nome"},{field:"email",title:"E-Mail"},{field:"type_tag",title:"Tipo"},{field:"document",title:"Documento"},{field:"status",title:"Ativo"},{field:"actions",title:"Actions"}])||[];function g(R){e.value=R,v.value=f.getEntity(R).name,c.value=!0,d.value="show"}function s(){c.value=!0,d.value="create"}function m(){n.value=!0;let R=null;b.filter=="status"?R=f.getEntitiesByStatus(b.term):b.filter==="type_tag"?R=f.getEntitiesByType(b.term):R=C.value,x.value=R.value.entity,n.value=!1}function o(){c.value=!1,b.back&&E.back()}async function u(R){try{await api.delete(`${a.value}/${R}`),f.removeEntity(R)}catch{alert("Falha na tentativa de deletar")}}return(R,k)=>(p(),y(B,null,[t("div",null,[t("div",Ht,[t("h2",Jt,T(l(S).entity_title),1),t("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:k[0]||(k[0]=w=>s())},[k[5]||(k[5]=t("span",null,"➕",-1)),G(" Adicionar novo(a) "+T(l(S).entity_title),1)])]),$(X,{rows:x.value,"onUpdate:rows":k[1]||(k[1]=w=>x.value=w),cols:l(i),"onUpdate:cols":k[2]||(k[2]=w=>H(i)?i.value=w:null),loading:n.value,"onUpdate:loading":k[3]||(k[3]=w=>n.value=w),route:a.value,"onUpdate:route":k[4]||(k[4]=w=>a.value=w),onDelete_:u},null,8,["rows","cols","loading","route"])]),c.value?(p(),z(Y,{key:0,title:v.value,onClose:o},{default:J(()=>[$(Gt,{entity:e.value,mode:d.value,onClose:o},null,8,["entity","mode"])]),_:1},8,["title"])):V("",!0)],64))}};export{Xt as default};
