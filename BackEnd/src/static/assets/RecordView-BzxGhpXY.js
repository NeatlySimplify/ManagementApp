import{J as H,K as q,b as c,e as i,l as e,A as E,z as C,p as b,B as J,g as n,H as j,F as R,C as O,I as T,u as K,y as F,L as Q,k as D,j as L,E as W,f as _,G as P,_ as X,o as Y,r as $,c as A,w as Z,m as ee,M as B,q as te}from"./index-BmPD7bql.js";import{_ as oe}from"./NotesComponent-CQXT4kIx.js";import{_ as x,a as z,b as le,c as ne}from"./DataTableComponent-J9lUy7PI.js";import{_ as se}from"./FormNumberComponent-BYMof0_A.js";const ae={class:"mb-3 row"},re={for:"entities",class:"col-sm-2 col-form-label"},ie={key:0,class:"list-group position-absolute w-100 z-3"},de=["onClick"],ue={key:1,class:"mt-2 list-group"},ce={__name:"FormSelectObjectMultipleComponent",props:H({title:{type:String},object:{type:Array}},{selectedOptions:{type:Array},selectedOptionsModifiers:{}}),emits:["update:selectedOptions"],setup(g){const f=g,y=q(g,"selectedOptions"),h=f.object.value.map(o=>({id:o.id,name:o.name})),m=ref(""),p=computed(()=>h.filter(o=>o.name.toLowerCase().includes(m.value.toLowerCase())));function l(o){y.value.some(d=>d.id===o.id)||y.value.push(o),m.value=""}function t(o){y.splice(o,1)}return(o,a)=>(i(),c("div",ae,[e("label",re,b(f.title),1),E(e("input",{"onUpdate:modelValue":a[0]||(a[0]=d=>j(m)?m.value=d:null),type:"text",placeholder:"",class:"form-control"},null,512),[[J,n(m)]]),n(p).length&&n(m)?(i(),c("ul",ie,[(i(!0),c(R,null,O(n(p),d=>(i(),c("li",{key:String(d.value),class:"list-group-item list-group-item-action",onClick:w=>l(d),style:{cursor:"pointer"}},b(d.name),9,de))),128))])):C("",!0),y.value?(i(),c("ul",ue,[(i(!0),c(R,null,O(o.selectedEntity,(d,w)=>(i(),c("li",{class:"list-group-item",key:w},b(d.name),1))),128)),e("span",{class:"btn-close",onClick:a[1]||(a[1]=d=>t(o.index))})])):C("",!0)]))}},pe={class:"table table-hover"},me={class:"table-group-divider"},ve={class:"dropdown"},ye={class:"dropdown-menu"},fe=["onClick"],be=["onClick"],ge={__name:"MovementTableComponent",props:{movement:{type:Array},movementModifiers:{}},emits:["update:movement"],setup(g){const f=T(),y=K();function h(l){f.push({name:"movement",params:{id:l,back:!0}})}function m(l,t){y.removeMovement(l.id),p.value.splice(t,1)}const p=q(g,"movement");return(l,t)=>(i(),c("table",pe,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Tipo"),e("th",{scope:"col"},"Valor"),e("th",{scope:"col"},"Parcelas"),e("th",{scope:"col"},"#")])],-1)),e("tbody",me,[(i(!0),c(R,null,O(l.payments,(o,a)=>(i(),c("tr",{key:a},[e("td",null,"R$ "+b(o.type_tage),1),e("td",null,b(o.value),1),e("td",null,b(o.installment),1),e("td",null,[e("div",ve,[t[0]||(t[0]=e("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),e("ul",ye,[e("li",null,[e("a",{class:"dropdown-item",onClick:d=>h(o),href:"#"},"Ver Mais!",8,fe)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:d=>m(o,a)},"Excluir!",8,be)])])])])]))),128))])]))}},_e={class:"table table-hover"},he={class:"table-group-divider"},$e={class:"dropdown"},ke={class:"dropdown-menu"},we=["onClick"],Se=["onClick"],Ce={__name:"EntityTableComponent",props:{entity:{type:Array},entityModifiers:{}},emits:["update:entity"],setup(g){const f=T(),y=F();function h(l){f.push({name:"entity",params:{id:l,back:!0}})}function m(l,t){y.removeEntity(l.id),p.value.splice(t)}const p=q(g,"entity");return(l,t)=>(i(),c("table",_e,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Nome"),e("th",{scope:"col"},"#")])],-1)),e("tbody",he,[(i(!0),c(R,null,O(p.value,(o,a)=>(i(),c("tr",{key:a},[e("td",null,"R$ "+b(o.name),1),e("td",null,[e("div",$e,[t[0]||(t[0]=e("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),e("ul",ke,[e("li",null,[e("a",{class:"dropdown-item",onClick:d=>h(o),href:"#"},"Ver Mais!",8,we)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:d=>m(o,a)},"Excluir!",8,Se)])])])])]))),128))])]))}},Re={class:"table table-hover"},Me={class:"table-group-divider"},Oe={class:"dropdown"},Ue={class:"dropdown-menu"},Ee=["onClick"],qe=["onClick"],Te={__name:"SchedulerTableComponent",props:{scheduler:{type:Array},schedulerModifiers:{}},emits:["update:scheduler"],setup(g){const f=T(),y=Q();function h(l){f.push({name:"",params:{id:l,back:!0}})}function m(l,t){y.removeScheduler(l.id),p.value.splice(t,1)}const p=q(g,"scheduler");return(l,t)=>(i(),c("table",Re,[t[1]||(t[1]=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Nome"),e("th",{scope:"col"},"Tipo"),e("th",{scope:"col"},"Status"),e("th",{scope:"col"},"Começo"),e("th",{scope:"col"},"Fim"),e("th",{scope:"col"},"#")])],-1)),e("tbody",Me,[(i(!0),c(R,null,O(l.payments,(o,a)=>(i(),c("tr",{key:a},[e("td",null,b(o.name),1),e("td",null,b(o.type_tag),1),e("td",null,b(o.status),1),e("td",null,b(o.date_beginning),1),e("td",null,b(o.date_ending),1),e("td",null,[e("div",Oe,[t[0]||(t[0]=e("button",{class:"btn btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},null,-1)),e("ul",Ue,[e("li",null,[e("a",{class:"dropdown-item",onClick:d=>h(o),href:"#"},"Ver Mais!",8,Ee)]),e("li",null,[e("a",{class:"dropdown-item",href:"#",onClick:d=>m(o,a)},"Excluir!",8,qe)])])])])]))),128))])]))}},Ve={class:"modal-header"},Ae={class:"modal-title"},Be={class:"modal-body"},xe={key:0},Ne={class:"modal-footer"},je={__name:"FormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},setup(g){BeforeMounted(async()=>{f.mode==="show"&&f.id!==null&&(t.value={...h.fetchRecord(f.id)})});const f=g,y=L(),h=D(),m=F(),p=y.getSettings,l=m.getAllEntities,t=ref({}),o=ref(!0),a={title:p.record_title,types:p.record_types.sort(),status:p.record_status.sort(),entity_title:p.entity_title};function d(){o.value=!o.value}async function w(){await U(),d()}function M(){h.removeRecord(t.value.id),close()}async function U(){if(f.mode==="create")h.createRecord(t.value);else{l.value.id=f.id;try{request=await api.put(route,l.value),l.value.id=request.result.id,m.updateEntity(cleanEntity(l.value))}catch{alert("Falha na tentativa de atualizar!")}}}return(S,s)=>(i(),c(R,null,[e("div",Ve,[e("h5",Ae,b(n(t).name),1),e("button",{type:"button",class:"btn-close",onClick:s[0]||(s[0]=(...u)=>S.closeModalfunc&&S.closeModalfunc(...u))},"Sair")]),e("div",Be,[e("div",null,[e("form",{onSubmit:s[7]||(s[7]=W(()=>{},["prevent"]))},[_(X,{title:"Nome",required:!0,isReadOnly:n(o),placeholder:n(t).name,"onUpdate:placeholder":s[1]||(s[1]=u=>n(t).name=u)},null,8,["isReadOnly","placeholder"]),_(x,{title:"Tipo de "+a.title,required:!0,isReadOnly:n(o),types:a.types,placeholder:n(t).type_tag,"onUpdate:placeholder":s[2]||(s[2]=u=>n(t).type_tag=u)},null,8,["title","isReadOnly","types","placeholder"]),_(x,{title:"Status de "+a.status,isReadOnly:n(o),types:a.status,placeholder:n(t).optional_status,"onUpdate:placeholder":s[3]||(s[3]=u=>n(t).optional_status=u)},null,8,["title","isReadOnly","types","placeholder"]),_(z,{title:"Esta Ativo ou Arquivado?",isReadOnly:n(o),required:!0,placeholder:n(t).status,"onUpdate:placeholder":s[4]||(s[4]=u=>n(t).status=u)},null,8,["isReadOnly","placeholder"]),_(se,{title:"Valor de "+a.title,isReadOnly:n(o),step:"0.01",min:"0",placeholder:n(t).value,"onUpdate:placeholder":s[5]||(s[5]=u=>n(t).value=u)},null,8,["title","isReadOnly","placeholder"]),g.mode==="create"?(i(),P(ce,{key:0,title:a.entity_title+" associado(s) a este "+a.title,object:n(l),placeholder:n(t).entities,"onUpdate:placeholder":s[6]||(s[6]=u=>n(t).entities=u)},null,8,["title","object","placeholder"])):C("",!0),_(oe,{notes:n(l).notes,isReadOnly:n(o)},null,8,["notes","isReadOnly"]),n(o)?(i(),c("button",{key:1,type:"button",onClick:d,class:"btn btn-secondary"}," Editar ")):(i(),c("button",{key:2,type:"submit",onClick:w,class:"btn btn-secondary"}," Salvar ")),e("button",{type:"button",onClick:M,class:"btn btn-danger"},"Excluir")],32),g.mode!=="create"?(i(),c("div",xe,[s[12]||(s[12]=e("br",null,null,-1)),_(ge,{movement:n(t).movement,"onUpdate:movement":s[8]||(s[8]=u=>n(t).movement=u)},null,8,["movement"]),_(Ce,{movement:n(t).entity,"onUpdate:movement":s[9]||(s[9]=u=>n(t).entity=u)},null,8,["movement"]),_(Te,{movement:n(t).event,"onUpdate:movement":s[10]||(s[10]=u=>n(t).event=u)},null,8,["movement"])])):C("",!0)])]),e("div",Ne,[e("button",{type:"button",class:"btn btn-primary",onClick:s[11]||(s[11]=(...u)=>S.close&&S.close(...u))},"Sair")])],64))}},Fe={class:"flex items-center justify-between mb-5"},De={class:"text-3xl"},Le={class:"row"},Pe={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},ze={key:0,class:"row"},Ie={key:1,class:"row"},Qe={__name:"RecordView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},filter:{type:String,required:!1,default:"all"},term:{type:[String],required:!1,default:""},status:{type:Boolean,required:!1,default:!0}},setup(g){const f=T(),y=D(),m=L().getSettings;Y(()=>{V(),p.id!==null&&u(p.id)});const p=g,l=$(p.filterStr),t=$(p.term),o=$(p.status),a=$(null),d=$(!1),w=$(!0),M=$(""),U=$(""),S=$(""),s=$([{field:"name",title:"Nome"},{field:"type_tag",title:"Tipo"},{field:"status",title:"Ativo"},{field:"optional_status",title:"Status"},{field:"service_id",title:"ID"},{field:"actions",title:"Actions"}])||[];function u(k){S.value=k,U.value=y.getRecord(k).name,d.value=!0,M.value="show"}function I(){d.value=!0,M.value="create"}function V(){l.value==="all"?a.value=A(()=>y.getAllRecords):l.value==="status"?a.value=A(()=>y.getRecordsByStatus(o.value)):a.value=A(()=>y.getRecordsByType(t.value)),w.value=!1}function N(){d.value=!1,p.back&&f.back()}function G(k){movementStore.removeRecord(k)}return Z(l,V,{immediate:!0}),(k,r)=>(i(),c(R,null,[e("div",null,[e("div",Fe,[e("h2",De,b(k.settings.entity_title),1),e("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:r[0]||(r[0]=v=>I())},[r[10]||(r[10]=e("span",null,"➕",-1)),ee(" Adicionar novo(a) "+b(k.settings.record_title),1)])]),e("div",Le,[e("div",Pe,[E(e("input",{type:"radio",class:"btn-check",id:"btnradio1",value:"all","onUpdate:modelValue":r[1]||(r[1]=v=>l.value=v),autocomplete:"off"},null,512),[[B,l.value]]),r[11]||(r[11]=e("label",{class:"btn btn-outline-primary",for:"btnradio1"},"Todos",-1)),E(e("input",{type:"radio",class:"btn-check",id:"btnradio2",value:"status","onUpdate:modelValue":r[2]||(r[2]=v=>l.value=v),autocomplete:"off"},null,512),[[B,l.value]]),r[12]||(r[12]=e("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Por Status",-1)),E(e("input",{type:"radio",class:"btn-check",id:"btnradio2",value:"type","onUpdate:modelValue":r[3]||(r[3]=v=>l.value=v),autocomplete:"off"},null,512),[[B,l.value]]),r[13]||(r[13]=e("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Por Tipo",-1))])]),l.value==="status"?(i(),c("div",ze,[_(z,{title:"Status de "+n(m).record_title,placeholder:o.value,"onUpdate:placeholder":r[4]||(r[4]=v=>o.value=v),isReadOnly:!1},null,8,["title","placeholder"])])):C("",!0),l.value==="type"?(i(),c("div",Ie,[_(x,{title:"Tipos de "+n(m).record_title,placeholder:t.value,"onUpdate:placeholder":r[5]||(r[5]=v=>t.value=v),isReadOnly:!1,types:n(m).record_types,options:""},null,8,["title","placeholder","types"]),e("button",{class:"btn btn-primary",onClick:V},"Pesquisar")])):C("",!0),_(le,{rows:a.value,"onUpdate:rows":r[6]||(r[6]=v=>a.value=v),cols:n(s),"onUpdate:cols":r[7]||(r[7]=v=>j(s)?s.value=v:null),loading:w.value,"onUpdate:loading":r[8]||(r[8]=v=>w.value=v),route:k.route,"onUpdate:route":r[9]||(r[9]=v=>k.route=v),onDelete_:G},null,8,["rows","cols","loading","route"])]),d.value?(i(),P(ne,{key:0,title:U.value,onClose:N},{default:te(()=>[_(je,{id:S.value,mode:M.value,onClose:N},null,8,["id","mode"])]),_:1},8,["title"])):C("",!0)],64))}};export{Qe as default};
