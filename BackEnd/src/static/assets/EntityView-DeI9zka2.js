import{y as M,r as _,o as P,b as m,e as v,z as V,l as t,A as U,B as A,F as B,C as D,j as F,D as I,g as l,p as T,k as h,E as j,f as $,_ as N,c as L,G as z,m as G,H,q as J,I as K}from"./index-BmPD7bql.js";import{_ as Q}from"./NotesComponent-CQXT4kIx.js";import{_ as q,a as W,b as X,c as Y}from"./DataTableComponent-J9lUy7PI.js";const Z={class:"border rounded"},tt={key:0},et={class:"col-sm-10 input-group"},lt={class:"col-sm-10 input-group"},nt={class:"col-sm-10 input-group"},ot={class:"col-sm-10 input-group"},st={class:"col-sm-10 input-group"},at={class:"col-sm-10 input-group"},it={key:0},ut=["onClick"],rt=["onClick"],dt={class:"col-sm-10 input-group"},pt=["value"],ct={class:"col-sm-10 input-group"},vt=["value"],yt={class:"col-sm-10 input-group"},mt=["value"],ft={class:"col-sm-10 input-group"},gt=["value"],bt={class:"col-sm-10 input-group"},xt=["value"],$t={class:"col-sm-10 input-group"},Ct=["value"],kt={__name:"AddressComponent",props:{entity:Object,isReadOnly:Boolean},setup(O){const E=M(),g=O,r=_({}),S=_(!1),C=_(null),i=_([]);function b(){r.value={},C.value=null,S.value=!1}function x(p){C.value=p,r.value={...i[p]},S.value=!0}function y(){E.updateAddress(r.value),i[C.value]={...r.value},b()}function o(p){E.deleteAddress(g.entity.value.id,p),i.value=i.value.filter(e=>e.id!==p)}function d(){r.value.id=E(r.value),i.value.push({...r.value})}return P(()=>{var p,e;(e=(p=g.entity)==null?void 0:p.value)!=null&&e.address&&(i.value=g.entity.value.address.map(a=>({...a})))}),(p,e)=>(v(),m("div",Z,[O.isReadOnly?V("",!0):(v(),m("div",tt,[t("div",et,[e[9]||(e[9]=t("span",{class:"input-group-text"},"Estado",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.value.state=a),class:"form-control-plaintext"},null,512),[[A,r.value.state]])]),t("div",lt,[e[10]||(e[10]=t("span",{class:"input-group-text"},"Cidade",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=a=>r.value.city=a),class:"form-control-plaintext"},null,512),[[A,r.value.city]])]),t("div",nt,[e[11]||(e[11]=t("span",{class:"input-group-text"},"Bairro",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=a=>r.value.district=a),class:"form-control-plaintext"},null,512),[[A,r.value.district]])]),t("div",ot,[e[12]||(e[12]=t("span",{class:"input-group-text"},"Rua",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=a=>r.value.street=a),class:"form-control-plaintext"},null,512),[[A,r.value.street]])]),t("div",st,[e[13]||(e[13]=t("span",{class:"input-group-text"},"Número",-1)),U(t("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=a=>r.value.number=a),class:"form-control-plaintext"},null,512),[[A,r.value.number]])]),t("div",at,[e[14]||(e[14]=t("span",{class:"input-group-text"},"Complemento",-1)),U(t("textarea",{rows:"2","onUpdate:modelValue":e[5]||(e[5]=a=>r.value.complement=a)},null,512),[[A,r.value.complement]])]),S.value?(v(),m("button",{key:1,class:"btn btn-outline-primary",onClick:e[7]||(e[7]=a=>y())},"Salvar")):(v(),m("button",{key:0,class:"btn btn-outline-primary",onClick:e[6]||(e[6]=a=>d())}," Salvar ")),t("button",{class:"btn btn-outline-warning",onClick:e[8]||(e[8]=a=>b())},"Limpar")])),(v(!0),m(B,null,D(i.value,(a,f)=>(v(),m("div",{key:f,class:"mb-3 row"},[O.isReadOnly?V("",!0):(v(),m("div",it,[t("button",{class:"btn btn-outline-secondary",onClick:n=>x(f)},"Editar",8,ut),t("button",{class:"btn btn-outline-danger",onClick:n=>o(a.id)},"Excluir",8,rt)])),t("div",null,[t("div",dt,[e[15]||(e[15]=t("span",{class:"input-group-text"},"Estado",-1)),t("input",{type:"text",readonly:"",value:a.state,class:"form-control-plaintext"},null,8,pt)]),t("div",ct,[e[16]||(e[16]=t("span",{class:"input-group-text"},"Cidade",-1)),t("input",{type:"text",readonly:"",value:a.city,class:"form-control-plaintext"},null,8,vt)]),t("div",yt,[e[17]||(e[17]=t("span",{class:"input-group-text"},"Bairro",-1)),t("input",{type:"text",readonly:"",value:a.district,class:"form-control-plaintext"},null,8,mt)]),t("div",ft,[e[18]||(e[18]=t("span",{class:"input-group-text"},"Rua",-1)),t("input",{type:"text",readonly:"",value:a.street,class:"form-control-plaintext"},null,8,gt)]),t("div",bt,[e[19]||(e[19]=t("span",{class:"input-group-text"},"Número",-1)),t("input",{type:"text",readonly:"",value:a.number,class:"form-control-plaintext"},null,8,xt)]),t("div",$t,[e[20]||(e[20]=t("span",{class:"input-group-text"},"Complemento",-1)),t("textarea",{rows:"2",readonly:"",value:a.complement},null,8,Ct)])])]))),128))]))}},_t={class:"border rounded"},Rt={key:0},St={class:"col-sm-10 input-group"},Ot=["value"],Et={class:"col-sm-10 input-group"},Ut={class:"col-sm-10 input-group"},wt={key:0},At=["onClick"],Vt=["onClick"],Bt={class:"col-sm-10"},Nt={class:"input-group"},qt=["value"],Tt={class:"col-sm-10"},Mt={class:"input-group"},Dt=["value"],Ft={class:"col-sm-10"},Pt={class:"input-group"},It=["value"],ht={__name:"ContactComponent",props:{entity,isReadonly},setup(O){const E=F(),g=M(),S=E.getSettings.contact_number_types.sort(),C=O,i=ref({}),b=ref(!1),x=ref(null),y=ref([]);function o(){i.value={},b.value=!1,x.value=null}function d(f){x.value=f,i.value={...y[f]},b.value=!0}function p(){g.updateContact(i.value),y[x.value]={...i.value},cleanAddressPlaceholder()}function e(f){g.deleteContact(C.entity.value.id,f),y.value=y.value.filter(n=>n.id!==f)}function a(){i.value.id=g.createContact(i.value),y.value.push({...i.value})}return onMounted(()=>{var f,n;(n=(f=C.entity)==null?void 0:f.value)!=null&&n.phone&&(y.value=C.entity.value.phone.map(c=>({...c})))}),(f,n)=>(v(),m("div",_t,[f.isReadOnly?V("",!0):(v(),m("div",Rt,[t("div",St,[n[7]||(n[7]=t("span",{class:"input-group-text"},"Tipo de Número",-1)),U(t("select",{"onUpdate:modelValue":n[0]||(n[0]=c=>l(i).type_tag=c)},[n[6]||(n[6]=t("option",{selected:""},null,-1)),(v(!0),m(B,null,D(l(S),(c,s)=>(v(),m("option",{key:s,value:c},T(c),9,Ot))),128))],512),[[I,l(i).type_tag]])]),t("div",Et,[n[8]||(n[8]=t("span",{class:"input-group-text"},"Número de Telefone",-1)),U(t("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=c=>l(i).number=c),class:"form-control-plaintext"},null,512),[[A,l(i).number]])]),t("div",Ut,[n[9]||(n[9]=t("span",{class:"input-group-text"},"Complemento",-1)),U(t("textarea",{rows:"2","onUpdate:modelValue":n[2]||(n[2]=c=>l(i).complement=c)},null,512),[[A,l(i).complement]])]),l(b)?(v(),m("button",{key:1,class:"btn btn-outline-primary",onClick:n[4]||(n[4]=c=>p())},"Salvar")):(v(),m("button",{key:0,class:"btn btn-outline-primary",onClick:n[3]||(n[3]=c=>a())}," Salvar ")),t("button",{class:"btn btn-outline-warning",onClick:n[5]||(n[5]=c=>o())},"Limpar")])),(v(!0),m(B,null,D(l(y),(c,s)=>(v(),m("div",{key:s,class:"mb-3 row"},[f.isReadOnly?V("",!0):(v(),m("div",wt,[t("button",{class:"btn btn-outline-secondary",onClick:u=>d(s)},"Editar",8,At),t("button",{class:"btn btn-outline-danger",onClick:u=>e(c.id)},"Excluir",8,Vt)])),t("div",Bt,[n[10]||(n[10]=t("p",null,"Tipo de Número",-1)),t("div",Nt,[t("input",{type:"text",readonly:"",value:c.type_tag,class:"form-control-plaintext"},null,8,qt)])]),t("div",Tt,[n[11]||(n[11]=t("p",null,"Número de Telefone",-1)),t("div",Mt,[t("input",{type:"text",readonly:"",value:c.number,class:"form-control-plaintext"},null,8,Dt)])]),t("div",Ft,[n[12]||(n[12]=t("p",null,"Informações Complementares",-1)),t("div",Pt,[t("textarea",{readonly:"",rows:"2",value:c.complement,class:"form-control-plaintext"},null,8,It)])])]))),128))]))}},jt={class:"modal-header"},Lt={class:"modal-title"},zt={class:"modal-body"},Gt={__name:"FormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},emits:["close"],setup(O,{emit:E}){BeforeMounted(async()=>{i.mode==="show"&&i.id!==null&&(o.value={...x.fetchEntity(i.id)},e())});const g=h(),r=ref(""),S=E;function C(){S("close")}const i=O,b=F(),x=M(),y=b.getSettings,o=ref({}),d=ref(!0),p={title:y.entity_title,types:y.entity_types.sort(),documents:y.entity_document_types.sort(),relationship:y.relationship_status.sort(),sex:y.sex.sort()};function e(){d.value=!d.value}function a(){n(),e()}function f(){x.removeEntity(o.value.id),C()}function n(){i.mode==="create"?(g.placeholder!==""&&(r.value=g.placeholder,g.placeholder=""),x.createEntity(o.value)):x.updateEntity(o.value)}return(c,s)=>(v(),m(B,null,[t("div",jt,[t("h5",Lt,T(l(o).name),1),t("button",{type:"button",class:"btn-close",onClick:C},"Sair")]),t("div",zt,[t("div",null,[t("form",{onSubmit:s[13]||(s[13]=j(()=>{},["prevent"]))},[$(N,{title:"Email",isReadOnly:l(d),required:!0,placeholder:l(o).email,"onUpdate:placeholder":s[0]||(s[0]=u=>l(o).email=u)},null,8,["isReadOnly","placeholder"]),$(q,{title:"Tipos de "+p.title,isReadOnly:l(d),required:!0,placeholder:l(o).type_tag,"onUpdate:placeholder":s[1]||(s[1]=u=>l(o).type_tag=u),types:p.types},null,8,["title","isReadOnly","placeholder","types"]),$(q,{title:"Tipos de "+p.title,isReadOnly:l(d),required:!0,placeholder:l(o).document_type,"onUpdate:placeholder":s[2]||(s[2]=u=>l(o).document_type=u),types:p.documents},null,8,["title","isReadOnly","placeholder","types"]),$(N,{title:"Documento",isReadOnly:l(d),required:!0,placeholder:l(o).document,"onUpdate:placeholder":s[3]||(s[3]=u=>l(o).document=u)},null,8,["isReadOnly","placeholder"]),$(W,{title:"Status",isReadOnly:l(d),placeholder:l(o).status,"onUpdate:placeholder":s[4]||(s[4]=u=>l(o).status=u)},null,8,["isReadOnly","placeholder"]),$(N,{title:"Nome",isReadOnly:l(d),required:!0,placeholder:l(o).name,"onUpdate:placeholder":s[5]||(s[5]=u=>l(o).name=u)},null,8,["isReadOnly","placeholder"]),$(q,{title:"Sexo",isReadOnly:l(d),placeholder:l(o).sex,"onUpdate:placeholder":s[6]||(s[6]=u=>l(o).sex=u),types:p.sex},null,8,["isReadOnly","placeholder","types"]),$(q,{title:"Estado Cívil",isReadOnly:l(d),placeholder:l(o).relationship_status,"onUpdate:placeholder":s[7]||(s[7]=u=>l(o).relationship_status=u),types:p.relationship},null,8,["isReadOnly","placeholder","types"]),$(N,{title:"Data de Nascimento",isReadOnly:l(d),placeholder:l(o).birth,"onUpdate:placeholder":s[8]||(s[8]=u=>l(o).birth=u),type:"date"},null,8,["isReadOnly","placeholder"]),$(kt,{entity:l(o),isReadOnly:l(d)},null,8,["entity","isReadOnly"]),$(ht,{entity:l(o),isReadOnly:l(d)},null,8,["entity","isReadOnly"]),$(Q,{notes:l(o).notes,"onUpdate:notes":s[9]||(s[9]=u=>l(o).notes=u),isReadOnly:l(d)},null,8,["notes","isReadOnly"]),l(d)?(v(),m("button",{key:0,type:"button",onClick:s[10]||(s[10]=u=>e()),class:"btn btn-secondary"}," Editar ")):(v(),m("button",{key:1,type:"submit",onClick:s[11]||(s[11]=u=>a()),class:"btn btn-secondary"}," Salvar ")),t("button",{type:"button",onClick:s[12]||(s[12]=u=>f()),class:"btn btn-danger"},"Excluir")],32)])]),t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-primary",onClick:C},"Sair")])],64))}},Ht={class:"flex items-center justify-between mb-5"},Jt={class:"text-3xl"},Xt={__name:"EntityView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},filter:{type:[String,null],required:!1,default:null},term:{type:[Boolean,String,null],required:!1,default:null}},setup(O){const E=K(),g=M(),S=F().getSettings,C=L(()=>g.getAllEntities),i=_("/entity");P(()=>{c(),b.id!==null&&f(b.id)});const b=O,x=_(null),y=_(!1),o=_(!0),d=_(""),p=_(""),e=_(""),a=_([{field:"name",title:"Nome"},{field:"email",title:"E-Mail"},{field:"type_tag",title:"Tipo"},{field:"document",title:"Documento"},{field:"status",title:"Ativo"},{field:"actions",title:"Actions"}])||[];function f(R){e.value=R,p.value=g.getEntity(R).name,y.value=!0,d.value="show"}function n(){y.value=!0,d.value="create"}function c(){o.value=!0;let R=null;b.filter=="status"?R=g.getEntitiesByStatus(b.term):b.filter==="type_tag"?R=g.getEntitiesByType(b.term):R=C.value,x.value=R.value.entity,o.value=!1}function s(){y.value=!1,b.back&&E.back()}async function u(R){try{await api.delete(`${i.value}/${R}`),g.removeEntity(R)}catch{alert("Falha na tentativa de deletar")}}return(R,k)=>(v(),m(B,null,[t("div",null,[t("div",Ht,[t("h2",Jt,T(l(S).entity_title),1),t("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:k[0]||(k[0]=w=>n())},[k[5]||(k[5]=t("span",null,"➕",-1)),G(" Adicionar novo(a) "+T(l(S).entity_title),1)])]),$(X,{rows:x.value,"onUpdate:rows":k[1]||(k[1]=w=>x.value=w),cols:l(a),"onUpdate:cols":k[2]||(k[2]=w=>H(a)?a.value=w:null),loading:o.value,"onUpdate:loading":k[3]||(k[3]=w=>o.value=w),route:i.value,"onUpdate:route":k[4]||(k[4]=w=>i.value=w),onDelete_:u},null,8,["rows","cols","loading","route"])]),y.value?(v(),z(Y,{key:0,title:p.value,onClose:s},{default:J(()=>[$(Gt,{entity:e.value,mode:d.value,onClose:s},null,8,["entity","mode"])]),_:1},8,["title"])):V("",!0)],64))}};export{Xt as default};
