import{u as V,j as h,b as S,e as b,l as n,p as q,E as N,z as B,f as d,g as t,_ as U,F as E,r as u,o as A,c as F,w as j,G as x,A as D,M as C,H as T,q as I,I as z}from"./index-DpmoGnXt.js";import{a as M,_ as G,b as H,c as W}from"./DataTableComponent-B9Nt-FVu.js";import{_ as J}from"./FormNumberComponent-C8de0aMF.js";import{_ as K}from"./FormSelectObjectComponent-ChgljHsk.js";import{_ as L}from"./DatePickerComponent-DF2k5yE4.js";const Q={class:"modal-header"},X={class:"modal-title"},Y={class:"modal-body"},Z={key:0},ee={__name:"PaymentFormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},emits:["close"],setup(O,{emit:$}){BeforeMounted(async()=>{m.mode==="show"&&m.id!==null&&(l.value={...c.fetchPayment(m.id)})});const g=$;function _(){g("close")}const m=O,r=h(),c=V(),p=r.getSettings,l=ref({}),s=ref(!0),v={title:p.movement_title,expense:p.movement_expense_types.sort(),income:p.movement_income_types.sort(),cycles:p.movement_cycle_types.sort()};function k(){s.value=!s.value}function R(){w(),k()}function w(){c.updatePayment(l.value)}function P(y){c.removePayment(y.id),_()}return(y,e)=>(b(),S(E,null,[n("div",Q,[n("h5",X,q(y.movement.name),1),n("button",{type:"button",class:"btn-close",onClick:_},"Sair")]),n("div",Y,[n("div",null,[n("form",{onSubmit:e[12]||(e[12]=N(()=>{},["prevent"]))},[m.mode!=="show"?(b(),S("div",Z,[d(U,{title:"Nome",placeholder:t(l).name,"onUpdate:placeholder":e[0]||(e[0]=o=>t(l).name=o),isReadOnly:!0},null,8,["placeholder"]),d(U,{title:"Tipo",placeholder:t(l).type_tag,"onUpdate:placeholder":e[1]||(e[1]=o=>t(l).type_tag=o),isReadOnly:!0},null,8,["placeholder"]),d(M,{title:"Ignore no balanço da conta",placeholder:t(l).ignore_in_totals,"onUpdate:placeholder":e[2]||(e[2]=o=>t(l).ignore_in_totals=o),isReadOnly:t(s)},null,8,["placeholder","isReadOnly"]),d(J,{title:"Todal de "+v.title,placeholder:t(l).value,"onUpdate:placeholder":e[3]||(e[3]=o=>t(l).value=o),isReadOnly:t(s)},null,8,["title","placeholder","isReadOnly"]),d(U,{title:"Data de Pagamento",placeholder:t(l).payment_date,"onUpdate:placeholder":e[4]||(e[4]=o=>t(l).payment_date=o),isReadOnly:t(s),type:"date"},null,8,["placeholder","isReadOnly"]),d(U,{title:"Data de Vencimento",placeholder:t(l).is_due,"onUpdate:placeholder":e[5]||(e[5]=o=>t(l).is_due=o),isReadOnly:t(s),type:"date"},null,8,["placeholder","isReadOnly"]),d(G,{title:"Categoria",isReadOnly:t(s),placeholder:t(l).category,"onUpdate:placeholder":e[6]||(e[6]=o=>t(l).category=o),types:y.movement.type_tag==="Entrada"||y.movement.type_tag==="income"?v.income:v.expense},null,8,["isReadOnly","placeholder","types"]),d(M,{title:"Status",isReadOnly:t(s),placeholder:t(l).status,"onUpdate:placeholder":e[7]||(e[7]=o=>t(l).status=o)},null,8,["isReadOnly","placeholder"]),d(K,{title:"Conta Bancária Default",object:t(r).getAllAccounts,placeholder:t(l).bank_account,"onUpdate:placeholder":e[8]||(e[8]=o=>t(l).bank_account=o)},null,8,["object","placeholder"])])):B("",!0),t(s)?(b(),S("button",{key:1,type:"button",onClick:e[9]||(e[9]=o=>k()),class:"btn btn-secondary"}," Editar ")):(b(),S("button",{key:2,type:"submit",onClick:e[10]||(e[10]=o=>R()),class:"btn btn-secondary"}," Salvar ")),n("button",{type:"button",onClick:e[11]||(e[11]=o=>P()),class:"btn btn-danger"},"Excluir")],32)])]),n("div",{class:"modal-footer"},[n("button",{type:"button",class:"btn btn-primary",onClick:_},"Sair")])],64))}},te={class:"row"},le={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},oe={class:"row"},re={__name:"PaymentView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},term:{type:[String],required:!1,default:"Entrada"}},setup(O){const $=z(),g=V(),_=u({});A(()=>{y(),m.id!==null&&P(m.id)});const m=O,r=u(""),c=u(new Date);r.value=m.term;const p=u(null),l=u(!1),s=u(!0),v=u(""),k=u(""),R=u(""),w=u([{field:"name",title:"Nome"},{field:"type_tag",title:"Tipo"},{field:"value",title:"Valor"},{field:"status",title:"Status"},{field:"payment_date",title:"Data de Pagamento"},{field:"is_due",title:"Data de Vencimento"},{field:"actions",title:"Actions"}])||[];function P(f){R.value=f,k.value=g.getPayment(f).name,l.value=!0,v.value="show"}function y(){s.value=!0,_.value=p.value=F(()=>g.getPaymentWindow(c,r)),s.value=!1}function e(){l.value=!1,m.back&&$.back()}function o(f){g.removePayment(f)}return j(r,loadMovement,{immediate:!0}),(f,a)=>(b(),S(E,null,[n("div",null,[n("div",te,[n("div",le,[D(n("input",{type:"radio",class:"btn-check",id:"btnradio1",value:"Entrada","onUpdate:modelValue":a[0]||(a[0]=i=>r.value=i),autocomplete:"off"},null,512),[[C,r.value]]),a[7]||(a[7]=n("label",{class:"btn btn-outline-primary",for:"btnradio1"},"Entrada",-1)),D(n("input",{type:"radio",class:"btn-check",id:"btnradio2",value:"Saída","onUpdate:modelValue":a[1]||(a[1]=i=>r.value=i),autocomplete:"off"},null,512),[[C,r.value]]),a[8]||(a[8]=n("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Saída",-1))])]),n("div",oe,[d(L,{currentDate:c.value,"onUpdate:currentDate":a[2]||(a[2]=i=>c.value=i)},null,8,["currentDate"])]),d(H,{rows:p.value,"onUpdate:rows":a[3]||(a[3]=i=>p.value=i),cols:t(w),"onUpdate:cols":a[4]||(a[4]=i=>T(w)?w.value=i:null),loading:s.value,"onUpdate:loading":a[5]||(a[5]=i=>s.value=i),route:f.route,"onUpdate:route":a[6]||(a[6]=i=>f.route=i),onDelete_:o},null,8,["rows","cols","loading","route"])]),l.value?(b(),x(W,{key:0,title:k.value,onClose:e},{default:I(()=>[d(ee,{id:R.value,mode:v.value,onClose:e},null,8,["id","mode"])]),_:1},8,["title"])):B("",!0)],64))}};export{re as default};
