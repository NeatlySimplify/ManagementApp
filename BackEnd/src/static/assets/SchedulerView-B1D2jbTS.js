import{j as B,b as y,e as p,l as t,p as S,g as o,E as N,f as d,_ as C,F as E,L as j,o as I,r as u,G as L,z as $,m as q,A as h,M as w,x as P,H as z,q as G,c as M,I as H}from"./index-BmPD7bql.js";import{_ as J}from"./NotesComponent-CQXT4kIx.js";import{_ as K,a as Q,b as W,c as X}from"./DataTableComponent-J9lUy7PI.js";import{_ as Y}from"./CalendarComponent-DfTXp2ML.js";const Z={class:"modal-header"},x={class:"modal-title"},ee={class:"modal-body"},te={class:"modal-footer"},le={__name:"FormComponent",props:{id:{type:[String,null],required:!1},mode:{type:String,default:"show"}},setup(R){BeforeMounted(()=>{b.mode==="show"&&b.id!==null&&(n.value={...schedulerStore.fetchScheduler(b.id)})});const b=R,U=B().getSettings,r=ref(!0),n=ref(null),c={types:U.scheduler_types.sort()};function f(){r.value=!r.value}async function v(){await k(),f()}function g(){schedulerStore.removeScheduler(n.value.id),close()}async function k(){b.mode==="create"?schedulerStore.createScheduler(n.value):schedulerStore.updateScheduler(n.value)}return(m,l)=>(p(),y(E,null,[t("div",Z,[t("h5",x,S(o(n).name),1),t("button",{type:"button",class:"btn-close",onClick:l[0]||(l[0]=(...a)=>m.closeModalfunc&&m.closeModalfunc(...a))},"Sair")]),t("div",ee,[t("div",null,[t("form",{onSubmit:l[6]||(l[6]=N(()=>{},["prevent"]))},[d(C,{title:"Nome",required:!0,isReadOnly:o(r),placeholder:o(n).name,"onUpdate:placeholder":l[1]||(l[1]=a=>o(n).name=a)},null,8,["isReadOnly","placeholder"]),d(K,{title:"Tipo de "+c.title,required:!0,isReadOnly:o(r),types:c.types,placeholder:o(n).type_tag,"onUpdate:placeholder":l[2]||(l[2]=a=>o(n).type_tag=a)},null,8,["title","isReadOnly","types","placeholder"]),d(Q,{title:"Esta Ativo ou Arquivado?",isReadOnly:o(r),required:!0,placeholder:o(n).status,"onUpdate:placeholder":l[3]||(l[3]=a=>o(n).status=a)},null,8,["isReadOnly","placeholder"]),d(C,{title:"Data de Inicio",required:!0,isReadOnly:o(r),placeholder:o(n).date_beginning,"onUpdate:placeholder":l[4]||(l[4]=a=>o(n).date_beginning=a),type:"datetime"},null,8,["isReadOnly","placeholder"]),d(C,{title:"Data do Fim",isReadOnly:o(r),placeholder:o(n).date_ending,"onUpdate:placeholder":l[5]||(l[5]=a=>o(n).date_ending=a),type:"datetime"},null,8,["isReadOnly","placeholder"]),d(J,{notes:m.entity.notes,isReadOnly:o(r)},null,8,["notes","isReadOnly"]),o(r)?(p(),y("button",{key:0,type:"button",onClick:f,class:"btn btn-secondary"}," Editar ")):(p(),y("button",{key:1,type:"submit",onClick:v,class:"btn btn-secondary"}," Salvar ")),t("button",{type:"button",onClick:g,class:"btn btn-danger"},"Excluir")],32)])]),t("div",te,[t("button",{type:"button",class:"btn btn-primary",onClick:l[7]||(l[7]=(...a)=>m.close&&m.close(...a))},"Sair")])],64))}},oe={class:"flex items-center justify-between mb-5"},ne={class:"text-3xl"},se={class:"flex items-center justify-between mb-5"},ae={class:"text-3xl"},ie={class:"row"},re={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},de={key:0},ue={class:"row"},pe={class:"btn-group",role:"group","aria-label":"Basic radio toggle button group"},ce={key:0,class:"row"},fe={key:1},ge={__name:"SchedulerView",props:{id:{type:[String,null],required:!1,default:null},back:{type:Boolean,required:!1,default:!1},filter:{type:[String,null],required:!1,default:null},term:{type:[Boolean,String,null],required:!1,default:null}},setup(R){const b=H(),_=j(),r=B().getSettings;I(()=>{loadScheduler(),n.id!==null&&V(n.id)});const n=R,c=u(null),f=u(!1),v=u(!0),g=u(""),k=u(""),m=u(""),l=u("calendar"),a=u([{field:"name",title:"Nome"},{field:"type_tag",title:"Tipo"},{field:"status",title:"Ativo"},{field:"date_beginning",title:"Data de Iníncio"},{field:"date_ending",title:"Data de Fim"},{field:"actions",title:"Actions"}])||[];function V(i){m.value=i,k.value=entity.getEntity(i),f.value=!0,g.value="show"}function D(){f.value=!0,g.value="create"}function F(){filter_string.value==="all"||filter_string.value!=="all"&&l.value==="calendar"?c.value=M(()=>_.getMonthlyEvents(currentDate.value)):c.value=M(()=>_.getEventByType(term_string.value)),v.value=!1}function O(){f.value=!1,n.back&&b.back()}async function A(i){_.removeScheduler(i)}return(i,e)=>{const T=P("FormSelectComponent");return p(),y(E,null,[t("div",null,[t("div",oe,[t("h2",ne,S(o(r).entity_title),1),t("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:e[0]||(e[0]=s=>i.createEntity())},[e[11]||(e[11]=t("span",null,"➕",-1)),q(" Adicionar novo(a) "+S(o(r).entity_title),1)])]),t("div",null,[t("div",se,[t("h2",ae,S(o(r).entity_title),1),t("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:e[1]||(e[1]=s=>D())},[e[12]||(e[12]=t("span",null,"➕",-1)),q(" Adicionar novo(a) "+S(o(r).record_title),1)])]),t("div",ie,[t("div",re,[h(t("input",{type:"radio",class:"btn-check",id:"btnradio1",value:"lista","onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),autocomplete:"off"},null,512),[[w,l.value]]),e[13]||(e[13]=t("label",{class:"btn btn-outline-primary",for:"btnradio1"},"Lista",-1)),h(t("input",{type:"radio",class:"btn-check",id:"btnradio2",value:"calendar","onUpdate:modelValue":e[3]||(e[3]=s=>l.value=s),autocomplete:"off"},null,512),[[w,l.value]]),e[14]||(e[14]=t("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Calendário",-1))])]),l.value==="lista"?(p(),y("div",de,[t("div",ue,[t("div",pe,[h(t("input",{type:"radio",class:"btn-check",id:"btnradio1",value:"all","onUpdate:modelValue":e[4]||(e[4]=s=>i.filter_string=s),autocomplete:"off"},null,512),[[w,i.filter_string]]),e[15]||(e[15]=t("label",{class:"btn btn-outline-primary",for:"btnradio1"},"Todos",-1)),h(t("input",{type:"radio",class:"btn-check",id:"btnradio2",value:"type","onUpdate:modelValue":e[5]||(e[5]=s=>i.filter_string=s),autocomplete:"off"},null,512),[[w,i.filter_string]]),e[16]||(e[16]=t("label",{class:"btn btn-outline-primary",for:"btnradio2"},"Por Tipo",-1))])]),i.filter_string==="type"?(p(),y("div",ce,[d(T,{title:"Tipos de Eventos",placeholder:i.term_string,"onUpdate:placeholder":e[6]||(e[6]=s=>i.term_string=s),isReadOnly:!1,types:i.setting.scheduler_types,options:""},null,8,["placeholder","types"]),t("button",{class:"btn btn-primary",onClick:F},"Pesquisar")])):$("",!0),d(W,{rows:c.value,"onUpdate:rows":e[7]||(e[7]=s=>c.value=s),cols:o(a),"onUpdate:cols":e[8]||(e[8]=s=>z(a)?a.value=s:null),loading:v.value,"onUpdate:loading":e[9]||(e[9]=s=>v.value=s),route:i.route,"onUpdate:route":e[10]||(e[10]=s=>i.route=s),onDelete_:A},null,8,["rows","cols","loading","route"])])):(p(),y("div",fe,[d(Y,{limited:!1})]))])]),f.value?(p(),L(X,{key:0,title:k.value,onClose:O},{default:G(()=>[d(le,{entity:i.scheduler_id,mode:g.value,onClose:O},null,8,["entity","mode"])]),_:1},8,["title"])):$("",!0)],64)}}};export{ge as default};
