import{W as A}from"./style-Bat5Xyzz.js";import{z as r,p as C,u as B,j as _,o as O,r as i,c as V,a as o,k as F,t as y,l as N,g as u,f as $,F as M,b as T}from"./index-DpeE4wFZ.js";const p=r.object({id:r.uuid(),type_tag:r.string(),name:r.string(),status:r.boolean(),optional_status:r.string().optional(),service_id:r.string().optional()}),D=C("record",{state:()=>({entries:{}}),getters:{getRecord:e=>t=>e.entries[t],getAllRecords:e=>Object.values(e.entries),getRecordsByStatus:e=>t=>Object.values(e.entries).filter(a=>a.status===t),getRecordsByType:e=>t=>Object.values(e.entries).filter(a=>a.type_tag===t)},actions:{add(e){const t=p.parse(e);this.entries[t.id]=t},remove(e){delete this.entries[e]},set(e){this.entries=e.reduce((t,a)=>{const c=p.parse(a);return t[c.id]=c,t},{})},update(e){const t=p.parse(e);this.entries[t.id]=t}}}),E={class:"flex items-center justify-between mb-5"},W={class:"text-3xl"},q={class:"flex gap-4"},z=["onClick"],H=["onClick"],G={__name:"RecordView",props:{id:{type:[String,null],required:!1,default:null}},setup(e){const t=D(),c=B().getSettings,R=_(()=>t.getAllRecords);O(()=>{k(),f.id!==null&&b(f.id)});const f=e,g=i(null),v=i(!1),d=i(!0),m=i("");i("");const S=i(""),h=i([{field:"name",title:"Nome"},{field:"service_id",title:"ID"},{field:"type_tag",title:"Tipo"},{field:"status",title:"Ativo"},{field:"optional_status",title:"Status"},{field:"actions",title:"Actions"}])||[];function b(s){entity_id.value=s,S.value=entity.getRecord(s),v.value=!0,m.value="show"}function w(){v.value=!0,m.value="create"}function k(){d.value=!0;const s=_(()=>Object.entries(R).map(([n,l])=>({id:n,...l})));g.value=s.value.record,d.value=!1}async function x(s){try{await api.delete(`record/${s}`),t.removeRecord(s)}catch{alert("Falha na tentativa de deletar")}}return(s,n)=>(T(),V(M,null,[n[2]||(n[2]=o("p",null,"Hello from Records",-1)),o("div",null,[o("div",E,[o("h2",W,y(s.setting.record_title),1),o("button",{class:"btn btn-outline-secondary d-grid gap-2",onClick:n[0]||(n[0]=l=>w())},[n[1]||(n[1]=o("span",null,"âž•",-1)),N(" Adicionar nov(a) "+y(u(c).record_title),1)])]),F(u(A),{rows:g.value,columns:u(h),loading:d.value,sortable:!0,columnFilter:!0},{actions:$(l=>[o("div",q,[o("button",{type:"button",class:"btn btn-success !py-1",onClick:j=>b(l.id)}," Ver Mais! ",8,z),o("button",{type:"button",class:"btn btn-danger !py-1",onClick:j=>x(l.id)}," Excluir ",8,H)])]),_:1},8,["rows","columns","loading"])])],64))}};export{G as default};
